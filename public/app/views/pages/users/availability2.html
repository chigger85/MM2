<div class="page-header">
 <h2>
	Fixtures
	<a ng-if = "main.user.userType == 'admin'" href="/availability/create" class="btn btn-default"> 
		<span class="glyphicon glyphicon-plus"></span>
		
	</a> 
</h2>
</div>


<div class = "jumbotron text-center" ng-show = "fixture.processing">
    <span class="glyphicon glyphicon-repeat spinner"></span> 
        <p>Loading Fixtures...</p>
       
</div>

<div class="container">
    <div class="row">
        <div class="panel panel-primary filterable">
            <div class="panel-heading">
                <h3 class = "panel-title"> Fixtures </h3>
                <div class="pull-right">
                </div>
            </div>
            <table class="table" ng-show = "fixture.fixtures">
                <thead>
                    <tr class="filters">
                        <th><input type="text" class="form-control" placeholder="Date" disabled></th>
                        <th><input type="text" class="form-control" placeholder="Opposition" disabled></th>
                        <th><input type="text" class="form-control" placeholder="H/A" disabled></th>
                        <th><input type="text" class="form-control" placeholder="Venue" disabled></th>
                        <th><input type="text" class="form-control" placeholder="Competition" disabled></th>
                        <th><input type="text" class="form-control" placeholder="Attending?" disabled></th>
                        <th ng-if = "main.user.userType == 'admin'"> <input type="text" class="form-control" placeholder="Admin" disabled> </th>
                    </tr>
                </thead>
                <tbody>
         <!-- LOOP OVER THE fixtures -->
                     <tr ng-repeat="detail in fixture.fixtures" class = "body"> 
                       <td> {{detail.date | date: 'longDate'}}</td>
                        <td>{{detail.opposition}}</td>
                        <td> 
                            <div ng-if = "detail.home == true"> H </div>
                            <div ng-if = "detail.home == false"> A </div>
                        </td>
                        <td>{{ detail.venue }}</td>
                        <td>{{ detail.comp}}</td>
                        <td>

                            <div ng-if = "detail.available.indexOf(main.user.id) >-1" class="yes glyphicon glyphicon-thumbs-up">
                                <a href="" class="btn btn-sm" ng-click = "fixture.removeAttend(detail._id)"> change </a>
                        
                            </div>

                            <div ng-if = "detail.available.indexOf(main.user.id) ==-1" class="no glyphicon glyphicon-thumbs-down">
                                <a href="" class="btn btn-sm" ng-click = "fixture.addAttend(detail._id)"> change </a>
                            </div>
                        
                        </td> 
                       <td>
                            <a ng-if = "main.user.userType == 'admin'" ng-href="/availability/{{ detail._id }}">
                                <span class="glyphicon glyphicon-pencil">&nbsp </span> 
                            </a>
                            <a ng-if = "main.user.userType == 'admin'"  href="#" ng-click="fixture.deleteFixture(detail ._id)">
                                <span class="glyphicon glyphicon-trash"></span>
                            </a>
                    </td>

                     </tr>


                 </tbody> 
            </table>
        </div>
    </div>
</div>
</div>

<div ng-controller="modalSubmitFixture">
    <script type="text/ng-template" id="modalSubmitFixture.html">
    <form class="form-horizontal" ng-submit="fixture.addFixture()">
        <div class="modal-header">
            <h3 class="modal-title">Add Fixture</h3>
        </div>
        <div class="modal-body">
            

                <div class="form-group">
                        <label class="col-sm-4 control-label"> Date </label> 
                        <div class="col-sm-8">
                            <input required = 'true' type="date" class="form-control" ng-model="fixture.fixtureData.date">
                        </div>
                </div>

                <div class="form-group">
                        <label class="col-sm-4 control-label">Opposition</label> 
                        <div class="col-sm-8">
                            <input required = 'true'  type="text" class="form-control" ng-model="fixture.fixtureData.opposition">
                        </div>
                </div>


        </div>
        <div class="modal-footer">
            <button class="btn btn-primary" type="button" ng-click="fixture.addFixture(); fixture.ok()">OK</button>
            <button class="btn btn-warning" type="button" ng-click="fixture.cancel()">Cancel</button>
        </div>
    </form>
    </script>

    <button type="button" class="btn btn-default" ng-click="open()">Open me!</button>
    <button type="button" class="btn btn-default" ng-click="open('lg')">Large modal</button>
    <button type="button" class="btn btn-default" ng-click="open('sm')">Small modal</button>

</div>

